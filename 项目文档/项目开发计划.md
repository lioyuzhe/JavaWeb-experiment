# 项目开发流程 - 上海理工大学食堂点评交流社区

> 项目英文名：UsstCafeteriaHub

## 团队详情

### 开发成员



组长： 李英杰



组员：  黄泽旭，陈皓暶，陈佳星，余芊卉，谭欣怡



### github仓库

[lioyuzhe/JavaWeb-experiment: javaweb实验项目 - 李英杰 团队 (github.com)](https://github.com/lioyuzhe/JavaWeb-experiment)





## 需求分析和功能分解



#### **1.** 系统管理员     admin

a. 首页：一个布局合理美观的综合信息首页

b. 食堂基本信息管理：增删改，如食堂名称，位置，时间等        cafeteria

c. 账号管理：增删改，设置食堂对应管理员     user    

d. 评价信息管理：可以删除，修改         cafeteria_remark     dish_remark

e. 交流社区信息管理：删除，修改         community

#### **2.** 食堂管理员   cafeteria_admin   

#### cafeteria_manage : 食堂管理表，因为食堂和食堂管理员之间是多对多的关系 

a. 首页：一个布局合理美观的综合信息首页（有新的未查看的投诉和评价信息应提醒条数，并可以通过点击查看详细内容，和其他功能入口）        complaint         cafeteria_remark

b. 食堂信息维护：可对**自己管理的食堂信息**进行维护修改 ，如简介，营业时间等。   cafeteria

c. 菜品维护：增删改，包括菜品信息如菜名、价格，促销价格（如有），菜系，图片等。     dish

d. 食堂评价处理：可以查看，并回复，不能删除。          cafeteria_remark

e. 活动公告：发布促销等各类活动公告信息               cafeteria_notice(每个食堂的公告表)      promotion : 促销

f. 发布投票调查：选择题类型的投票，可以设计几个选项供用户选择，并可以查看统计结果。         vote 

g. 投诉信息处理：查看投诉信息，并回复投诉者处理结果。  complaint

h. 发布最新推荐菜品：         dish  设置状态

#### **3.** 师生用户     user

a. 首页：一个布局合理美观的综合信息首页—有各种功能的入口，以及其他综合信息例如：可以显示最新促销信息，最新投票调查，最新食堂推荐菜品，社区热门话题（被点赞最多的社区信息），最新食堂排名，最新高评价菜品排名等。如有最新的评论点赞自己加入的社区信息未看可以提示，如有最新未看的投诉回复也可以提示。

promotion    vote       new_dish            community（要有）+ community_user(要设置发布消息数和消息被点赞总数)  + community_message（社区信息可以类比成qq的说说，可以点赞，然后显示每个社区点赞最多的作为社区热门话题）      cafeteria_rank   dish_rank    complaint



b. 交流社区：可以按时间和热度排序显示社区用户信息，可以按标题和用户名搜索信息。用户可以发表短信息在平台上进行口味交流、分享自己点餐、发布美食照片等，包括标题，内容等，并能被点赞，也可以被评论。点击该用户的名称可以查看该用户所有发表的信息。

 community_user          community_message



c. 菜品检索(搜索）：可对菜品进行综合检索，可以按菜系、价格、食堂等分别进行检索，并查看每一个检索结果的详细信息，可以选择菜品进行文字或图文评价建议，并评分。

dish dish_remark(   菜品评价表  )



d. 评分分值系统：自行设计，每个菜品可以显示当前用户的综合评分结果，自行设计一套合理的评分统计算法。

dish dish_remark(菜品评价表)





e. 食堂检索：可以根据食堂列表，查找食堂，并查看该食堂各种信息，公告信息并进一步检索其菜品信息

cafeteria  dish



f. 投诉：可以在食堂信息里进一步进行投诉，提交投诉信息，查看投诉结果。

complaint



g. 实时消息系统：可以搜索或点击用户进行在线消息发送，进行交流，咨询。如该用户在线，可以实时收到消息。

user(包含属性：status (在线状态，如在线、离线、忙碌等))    

私信表 (`private_messages`)

- **message_id**: 唯一标识，主键。
- **sender_id**: 发送者的用户ID，外键关联`users`表。
- **receiver_id**: 接收者的用户ID，外键关联`users`表。
- **content**: 消息内容。
- **timestamp**: 发送时间。
- **read_status**: 阅读状态（已读/未读）。

用户会话表（可选）(`conversations`)

- **conversation_id**: 唯一标识，主键。
- **user_one_id**: 参与会话的用户之一，外键关联`users`表。
- **user_two_id**: 参与会话的另一用户，外键关联`users`表。
- **last_message_id**: 最后一条消息的ID，外键关联`private_messages`表。
- **last_message_time**: 最后一条消息的发送时间。



> 为什么这样设计：
>
> 采用会话方式管理私信时，`conversations`表用于跟踪用户间的对话历史。这种方式可以帮助用户更好地组织和浏览他们的消息。下面详细介绍如何实现这个功能。
>
> 1. `conversations` 表的设计
>
> - **conversation_id**: 对话的唯一标识，主键。
> - **user_one_id** 和 **user_two_id**: 参与对话的两个用户的ID，外键关联`users`表。
> - **last_message_id**: 对话中最后一条消息的ID，外键关联`private_messages`表。
> - **last_message_time**: 对话中最后一条消息的发送时间。
>
> 2. 创建和更新会话
>
> - **开始新对话**：当用户A首次向用户B发送私信时，系统会在`conversations`表中创建一个新的记录。这个记录将包含用户A和B的ID，以及最初的消息ID和时间戳。
> - **更新现有对话**：如果用户A和B之间已经存在对话，当有新的消息发送时，系统将更新该对话记录，修改`last_message_id`和`last_message_time`为最新消息的ID和时间戳。
>
> 3. 检索会话和消息
>
> - **显示对话列表**：用户登录后，系统可以查询`conversations`表，找出所有包含该用户的对话。可以按`last_message_time`降序排列，以显示最近的对话。
> - **显示特定对话中的消息**：当用户选择一个对话时，系统将查询`private_messages`表，检索该对话中的所有消息。可以按时间顺序排列消息。
>
> 4. 处理删除和归档
>
> - **删除消息或对话**：用户可以选择删除特定消息或整个对话。系统需要相应地更新`private_messages`表和`conversations`表。
> - **归档对话**：可以实现归档功能，允许用户将不常用的对话移至归档区，以便减少主界面的拥堵。
>
> 5. 高级功能
>
> - **对话预览**：在对话列表中，可以显示每个对话的最后一条消息作为预览。
> - **未读消息计数**：系统可以统计每个对话中未读消息的数量，提示用户。
>
> 6. 性能和优化
>
> - 对于包含大量消息的对话，考虑实现分页或按需加载的机制，以提高性能和用户体验。
> - 为`user_one_id`、`user_two_id`和`last_message_time`等字段建立索引，以优化查询效率。
>
> 会话管理的实现细节可能根据不同的应用需求和技术栈有所不同，但上述提供了一种基本的实现方法。



h. 用户等级：用户活跃等级分制度，可以根据用户登录次数、评价次数、社区活跃度、投诉、参与投票等各种交互活动，设计一个用户等级升级机制，在页面上以文字或图片方式显示不同用户级别。并对于该用户的评价信息赋予相应高权重。

user (加入一个活跃度属性)

算法规则：

 设置5个等级 ： 活跃度为0- 100 为等级1

100-1000 为等级2

1000-10000为等级3

10000-100000为等级4

100000-1000000为等级5

最高为等级5

活跃度计算规则：







i. 排名系统：食堂综合评价和排名，可以根据用户对食堂的菜品的评价分数、投诉、评价用户等级等各种因素，设计一个比较客观的食堂综合评分排名系统算法。并显示评分和排名。

 cafeteria_rank 



j. 投票调查：查看当前所有投票调查，并可以对食堂发起的投票调查进行投票，查看投票结果。









#### 登录注册







## 项目总体设计

### 开发策略

敏捷开发：两个周期

第一周期：第15周-第16周 完成

第二周期： 第17周

具体的开发流程可以参考：[项目介绍 | RuoYi](http://doc.ruoyi.vip/ruoyi-vue/document/xmjs.html#文件结构)

### 开发标准  

> github 工作标准
>
> ： 每周开两次会，专门进行git的提交，防止出错



> 后端开发标准
>
> 



> 前端开发标准
>
> 



### 技术栈

**前端**

- 三件套
- Vue2
- 组件库 ：ElementUI Element Plus
- npm 



**后端**

- 编程语言： java
- 框架：Spring
- SSM : spring springMVC Mybatis
- MyBatis Plus
- springboot
- junit 单元测试







## 详细设计 

### 数据库设计

> 数据库表开发说明： 
>
> - **所有数据库表全部不设置外键，数据库表的联系全部在代码逻辑中实现，这样便于之后修改数据库，同时也可以有效防止数据库操作是报错。**
>
> - **数据库表设计的时先采用了范式规范化设计，然后采用了反范式化设计，将小表合成大表，同时添加一些信息，虽然可能带有一定冗余，但是对后续功能的实现很友好。所以如果看到数据库有冗余信息不要大惊小怪。**
> - **所有的时间全部设置成datetime，除非要用到通过时间排序功能的设置成Date。**



#### 管理员有关表：

##### **1. admin 表（系统管理员表）**

就不设置role了，直接前端控制管理员和用户登录就可以。

| 字段名      | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| ----------- | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| admin_id    | bigint   |          | N        | Y          | 管理员ID                                   |
|             |          |          |          |            |                                            |
| account     | varchar  | 256      | N        | N          | 账户名                                     |
| name        | varchar  | 256      | Y        | N          | 用户名  通过代码逻辑随机生成               |
| password    | varchar  | 256      | N        | N          | 密码                                       |
| avatar      | varchar  | 1024     | Y        | N          | 头像                                       |
| email       | varchar  | 256      | Y        | N          | 邮箱地址                                   |
| phone       | varchar  | 256      | Y        | N          | 手机号                                     |
|             |          |          |          |            |                                            |
|             |          |          |          |            |                                            |
|             |          |          |          |            |                                            |
| create_time | datetime |          | Y        | N          | 创建时间                                   |
| deleted     | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |

##### **1. cafeteria_admin 表（食堂管理员表）**

| 字段名      | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| ----------- | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| admin_id    | bigint   |          | N        | Y          | 食堂管理员ID                               |
| account     | varchar  | 256      | N        | N          | 账户名                                     |
| name        | varchar  | 256      | Y        | N          | 用户名  通过代码逻辑随机生成               |
| password    | varchar  | 256      | N        | N          | 密码                                       |
| avatar      | varchar  | 1024     | Y        | N          | 头像                                       |
| email       | varchar  | 256      | Y        | N          | 邮箱地址                                   |
| phone       | varchar  | 256      | Y        | N          | 手机号                                     |
|             |          |          |          |            |                                            |
|             |          |          |          |            |                                            |
|             |          |          |          |            |                                            |
| create_time | datetime | 256      | Y        | N          | 创建时间                                   |
| deleted     | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |

#### 用户有关表：

##### **3. user 表（账号管理表）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                                         |
| -------------- | -------- | -------- | -------- | ---------- | ------------------------------------------------------------ |
| user_id        | bigint   |          | N        | Y          | 用户ID                                                       |
| account        | varchar  | 256      | N        | N          | 账户名                                                       |
| name           | varchar  | 256      | Y        | N          | 用户名                                                       |
| password       | varchar  | 256      | N        | N          | 密码                                                         |
| avatar         | varchar  | 1024     | Y        | N          | 头像                                                         |
| email          | varchar  | 256      | Y        | N          | 邮箱                                                         |
| phone          | varchar  | 256      | Y        | N          | 手机号                                                       |
| status         | int      |          | N        | N          | 在线状态 , 默认为0,0表示离线，1表示在线        这里的在线状态可以还是在代码中实现，不要去修改代码了。 |
| activity_level | int      |          | Y        | N          | 活跃度                                                       |
|                |          |          |          |            |                                                              |
|                |          |          |          |            |                                                              |
|                |          |          |          |            |                                                              |
| deleted        | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除                   |

##### **5. private_messages 表（私信表）**

| 字段名          | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                                         |
| --------------- | -------- | -------- | -------- | ---------- | ------------------------------------------------------------ |
| message_id      | bigint   |          | N        | Y          | 消息ID                                                       |
| sender_id       | bigint   |          | N        | N          | 发送者ID                                                     |
| sender_name     | varchar  | 256      | N        | N          | 发送者姓名                                                   |
| sender_avatar   | varchar  | 1024     | Y        | N          | 发送者头像                                                   |
| receiver_id     | bigint   |          | N        | N          | 接收者ID                                                     |
| receiver_name   | varchar  | 256      | N        | N          | 接受者姓名                                                   |
| receiver_avatar | varchar  | 1024     | Y        | N          | 接受者头像                                                   |
| content         | text     |          | N        | N          | 消息内容                                                     |
| timestamp       | datetime |          | N        | N          | 发送时间                                                     |
| read_status     | tinyint  |          | N        | N          | 阅读状态， 默认为0，表示未读，1表示已读。（这个功能看情况要不要实现，可能没必要） |
|                 |          |          |          |            |                                                              |
|                 |          |          |          |            |                                                              |
| deleted         | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除                   |
|                 |          |          |          |            |                                                              |

##### conversation表 会话表

| 字段名            | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                               |
| ----------------- | -------- | -------- | -------- | ---------- | -------------------------------------------------- |
| conversation_id   | bigint   |          | N        | Y          | 会话ID                                             |
| user_one_id       | bigint   |          | N        | N          | 参与会话的用户之一的ID，外键关联user表             |
| user_one_name     | varchar  | 100      | N        | N          | 参与会话的用户之一的姓名                           |
| user_one_avatar   | varchar  | 255      | Y        | N          | 参与会话的用户之一的头像                           |
| user_two_id       | bigint   |          | N        | N          | 参与会话的另一用户的ID，外键关联user表             |
| user_two_name     | varchar  | 100      | N        | N          | 参与会话的另一用户的姓名                           |
| user_two_avatar   | varchar  | 255      | Y        | N          | 参与会话的另一用户的头像                           |
| last_message_id   | bigint   |          | N        | N          | 会话中最后一条消息的ID，外键关联private_messages表 |
| last_message_time | datetime |          | N        | N          | 会话中最后一条消息的发送时间                       |

#### 食堂有关表：

##### **2. cafeteria 表（食堂基本信息表）**

好的，我来帮您添加一个管理员的id和姓名的属性。

| 字段名       | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| ------------ | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| cafeteria_id | bigint   |          | N        | Y          | 食堂ID                                     |
| name         | varchar  | 256      | N        | N          | 食堂名称                                   |
| location     | varchar  | 256      | Y        | N          | 位置                                       |
| description  | text     |          | Y        | N          | 描述信息                                   |
| admin_id     | bigint   |          | Y        | N          | 食堂管理员ID                               |
| admin_name   | varchar  | 256      | Y        | N          | 食堂管理员姓名                             |
| open_time    | datetime | 256      | Y        | N          | 开放时间                                   |
| close_time   | datetime | 256      | Y        | N          | 关闭时间                                   |
| deleted      | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |

这样修改是否符合您的需求呢？

##### **4. cafeteria_remark 表（食堂评价信息表）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                                       |
| -------------- | -------- | -------- | -------- | ---------- | ---------------------------------------------------------- |
| remark_id      | bigint   |          | N        | Y          | 评价ID                                                     |
| cafeteria_id   | bigint   |          | N        | N          | 食堂ID                                                     |
| cafeteria_name | varchar  | 256      | N        | N          | 食堂名                                                     |
| user_id        | bigint   |          | N        | N          | 用户ID                                                     |
| user_name      | varchar  | 256      | N        | N          | 用户名                                                     |
| content        | text     |          | Y        | N          | 评价内容                                                   |
| reply          | text     |          | Y        | N          | 对用户评价的回复                                           |
| status         | int      |          | N        | N          | 默认为0 ， 创建的时候默认为0, 0表示没有回复，1表示已回复。 |
|                |          |          |          |            |                                                            |
| create_time    | datetime | 256      | Y        | N          | 创建时间                                                   |
| deleted        | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除                 |

##### **2. cafeteria_manage 表（食堂管理表，多对多关系表）**

| 字段名       | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| ------------ | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| manage_id    | bigint   |          | N        | Y          | 管理记录ID                                 |
| admin_id     | bigint   |          | N        | N          | 食堂管理员ID                               |
| cafeteria_id | bigint   |          | N        | N          | 食堂ID                                     |
|              |          |          |          |            |                                            |
|              |          |          |          |            |                                            |
| deleted      | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |
|              |          |          |          |            |                                            |

##### **4. cafeteria_notice 表（食堂活动公告表）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| -------------- | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| notice_id      | bigint   |          | N        | Y          | 公告ID                                     |
| cafeteria_id   | bigint   |          | N        | N          | 食堂ID                                     |
| cafeteria_name | varchar  | 256      | N        | N          | 食堂名                                     |
| title          | varchar  | 256      | N        | N          | 标题                                       |
| content        | text     |          | Y        | N          | 内容                                       |
| create_time    | datetime | 256      | Y        | N          | 创建时间                                   |
| deleted        | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |
|                |          |          |          |            |                                            |

##### **5. vote 表（投票调查表） （ 有点复杂，先不实现）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| -------------- | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| vote_id        | bigint   |          | N        | Y          | 投票ID                                     |
| cafeteria_id   | bigint   |          | N        | N          | 食堂ID                                     |
| cafeteria_name | varchar  | 50       | Y        | N          | 食堂名称                                   |
| question       | varchar  | 256      | N        | N          | 问题                                       |
| options        | text     |          | N        | N          | 选项（JSON格式）                           |
| start_time     | datetime |          | N        | N          | 开始时间                                   |
| end_time       | datetime |          | N        | N          | 结束时间                                   |
| create_time    | datetime |          | Y        | N          | 创建时间                                   |
| deleted        | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |

> **1. 数据库设计**
>
> **投票表（Votes Table）**
>
> - **ID**：投票的唯一标识。
> - **Title**：投票的标题。
> - **Description**：投票的描述。
> - **StartTime**：投票开始时间。
> - **EndTime**：投票结束时间。
>
> **投票选项表（Options Table）**
>
> - **OptionID**：每个选项的唯一标识。
> - **VoteID**：关联的投票ID。
> - **OptionDescription**：选项描述。
>
> ### **用户投票记录表（UserVotes Table）**
>
> - **UserID**：投票用户的唯一标识。
> - **VoteID**：关联的投票ID。
> - **OptionID**：用户选择的选项ID。
> - **VoteTime**：投票时间。

##### complaint 投诉表

| 字段名         | 字段类型 | 数据长度 | 能否为NULL | 是否为主键 | 备注                                   |
| -------------- | -------- | -------- | ---------- | ---------- | -------------------------------------- |
| complaint_id   | bigint   |          | N          | Y          | 投诉ID                                 |
| user_id        | bigint   |          | N          | N          | 用户ID                                 |
| user_name      | varchar  | 255      | N          | N          | 用户名                                 |
| cafeteria_id   | bigint   |          | N          | N          | 食堂ID                                 |
| cafeteria_name | varchar  | 255      | N          | N          | 食堂名                                 |
| content        | text     |          | Y          | N          | 投诉内容                               |
| status         | int      |          | N          | N          | 投诉处理状态，0表示未处理，1表示已处理 |
| reply          | text     |          | Y          | N          | 投诉处理回复内容                       |
| deleted        | tinyint  |          | N          | N          | 逻辑删除，默认为0表示不删除，1表示删除 |

##### **6. cafeteria_rank 表（食堂排名表）**

| Field          | Type    | Length | NULL | Key  | Note                                       |
| -------------- | ------- | ------ | ---- | ---- | ------------------------------------------ |
| rank_id        | bigint  |        | N    | Y    | Ranking ID                                 |
| cafeteria_id   | bigint  |        | N    | N    | Cafeteria ID                               |
| cafeteria_name | varchar | 100    | N    | N    | Name of the cafeteria                      |
| total_score    | float   |        | N    | N    | Total score                                |
| rank           | int     |        | N    | N    | Ranking                                    |
|                |         |        |      |      |                                            |
| deleted        | tinyint |        | N    | N    | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |

#### 菜品有关表

##### **3. dish 表（菜品维护表）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| -------------- | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| dish_id        | bigint   | -        | N        | Y          | 菜品ID                                     |
| cafeteria_id   | bigint   | -        | N        | N          | 食堂ID                                     |
| cafeteria_name | varchar  | 256      | N        | N          | 食堂名                                     |
| name           | varchar  | 256      | N        | N          | 菜名                                       |
| price          | decimal  | -        | N        | N          | 价格                                       |
| cuisine        | varchar  | 256      | N        | N          | 菜系                                       |
| image_url      | varchar  | 256      | Y        | N          | 图片                                       |
| status         | int      | -        | N        | N          | 默认为0，0 表示普通菜品，1表示最新推荐菜品 |
| deleted        | tinyint  | -        | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |

##### **6. promotion 表（促销信息表）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                           |
| -------------- | -------- | -------- | -------- | ---------- | ---------------------------------------------- |
| promotion_id   | bigint   |          | N        | Y          | 促销ID                                         |
| cafeteria_id   | bigint   |          | N        | N          | 食堂ID                                         |
| cafeteria_name | varchar  | 256      | N        | N          | 食堂名称                                       |
| dish_id        | bigint   |          | N        | N          | 菜品id                                         |
| dish_name      | varchar  | 256      | N        | N          | 促销菜品名称                                   |
| start_time     | datetime |          | N        | N          | 开始时间                                       |
| end_time       | datetime |          | N        | N          | 结束时间                                       |
| description    | text     |          | Y        | N          | 描述信息                                       |
| image_url      | varchar  | 256      | Y        | N          | 图片                                           |
| status         | int      |          | N        | N          | 默认为0，0表示未开始；1表示进行中；2表示已结束 |
| create_time    | datetime |          | Y        | N          | 创建时间                                       |
| deleted        | tinyint  |          | N        | N          | 逻辑删除，默认为0表示不删除，1表示删除         |

##### **4. dish_remark 表（菜品评价表）**

| 字段名    | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                       |
| --------- | -------- | -------- | -------- | ---------- | ------------------------------------------ |
| remark_id | bigint   |          | N        | Y          | 评价ID                                     |
| user_id   | bigint   |          | N        | N          | 用户ID                                     |
| user_name | varchar  | 256      | N        | N          | 用户名称                                   |
| dish_id   | bigint   |          | N        | N          | 菜品ID                                     |
| dish_name | varchar  | 256      | N        | N          | 菜品名称                                   |
| content   | text     |          | Y        | N          | 评价内容                                   |
| score     | float    |          | Y        | N          | 评分                                       |
| deleted   | tinyint  |          | N        | N          | 逻辑删除，默认为0 ，表示不删除，1 表示删除 |

##### **7. dish_rank 表（菜品排名表）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注   |
| -------------- | -------- | -------- | -------- | ---------- | ------ |
| rank_id        | bigint   |          | N        | Y          | 排名ID |
| cafeteria_id   | bigint   |          | N        | N          | 食堂ID |
| cafeteria_name | varchar  | 256      | N        | N          | 食堂名 |
| dish_id        | bigint   |          | N        | N          | 菜品ID |
| dish_name      | varchar  | 256      | N        | N          | 菜品名 |
| total_score    | float    |          | Y        | N          | 总评分 |
| rank           | int      |          | N        | N          | 排名   |

#### 社区有关表

##### **1. community 表（社区表）**

| 字段名       | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                                         |
| ------------ | -------- | -------- | -------- | ---------- | ------------------------------------------------------------ |
| community_id | bigint   |          | N        | Y          | 社区ID                                                       |
| user_id      | bigint   |          | N        | N          | 创建者用户ID 为某个用户创建                                  |
| user_name    | varchar  | 256      | Y        | N          | 创建者姓名，这里专门设计一个user_name,可以方便之后查询数据，二不用使用join连接数据库表 |
|              |          |          |          |            |                                                              |
|              |          |          |          |            |                                                              |
| name         | varchar  | 256      | N        | N          | 社区名称                                                     |
| description  | text     |          | Y        | N          | 社区描述                                                     |
| create_time  | datetime | 256      | Y        | N          | 创建时间                                                     |
| deleted      | tinyint  |          | N        | N          | 逻辑删除，默认为0表示不删除，1表示删除                       |

##### **2. community_user 表（社区用户表）**

| 字段名            | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                   |
| ----------------- | -------- | -------- | -------- | ---------- | -------------------------------------- |
| community_user_id | bigint   |          | N        | Y          | 社区用户ID                             |
| user_id           | bigint   |          | N        | N          | 用户ID                                 |
| user_name         | varchar  | 50       | N        | N          | 用户名                                 |
| community_id      | bigint   |          | N        | N          | 社区ID                                 |
| community_name    | varchar  | 50       | N        | N          | 社区名                                 |
| post_count        | int      |          | Y        | N          | 发布消息数                             |
| like_count        | int      |          | Y        | N          | 点赞总数                               |
| deleted           | tinyint  |          | N        | N          | 逻辑删除，默认为0表示不删除，1表示删除 |

##### **3. community_message 表（社区信息表）**

| 字段名         | 字段类型 | 数据长度 | 能否NULL | 是否为主键 | 备注                                                   |
| -------------- | -------- | -------- | -------- | ---------- | ------------------------------------------------------ |
| message_id     | bigint   |          | N        | Y          | 信息ID                                                 |
| community_id   | bigint   |          | N        | N          | 社区ID                                                 |
| community_name | varchar  | 256      | N        | N          | 社区名                                                 |
| user_id        | bigint   |          | N        | N          | 用户ID                                                 |
| user_name      | varchar  | 256      | N        | N          | 用户名                                                 |
| title          | varchar  | 256      | N        | N          | 标题                                                   |
| content        | text     |          | N        | N          | 内容（具体的存储的内容可以在前端通过富文本编辑器实现） |
| like_count     | int      |          | N        | N          | 点赞数                                                 |
| deleted        | tinyint  |          | N        | N          | 逻辑删除，默认为0表示不删除，1表示删除                 |







### 接口设计









### 用户UI设计（前端设计）

#### 管理员页面





#### 食堂管理员页面





#### 社区页面（师生）









### 类和模块设计





### 性能设计

#### 缓存







#### 负载均衡









### 安全设计

数据库加密



登录验证





## 项目初始化

### github初始化





### 后端初始化





### 前端初始化









## 项目开发

### 任务分配















## 测试



### 压力测试















## 项目总结



